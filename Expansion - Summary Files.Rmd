---
title: "EOY 2019 Expansion"
output: html_notebook
---

```{r}
library(tidyverse)
library(purrr)
library(roxygen2)
library(data.table)
source("N:\\CommDev\\Research\\Public\\Overview of Census and ACS Data\\sumRange.R")
```

# Function to name files

```{r}
#' File naming
#'
#' Creates names for files saved in memory
#'
#' @param name_vector character vector of file names, usually produced by list.files()
#'
#' @return Character vector of length 1 by which to name the file
#' 
#' @examples
#' list2env(purrr::map(set_names(file_vector_from_list.files, make_names(file_vector_from_list.files), 
#'                     read_csv), 
#'          envir = .GlobalEnv))
#'
#' @export
make_names <- function(name_vector) {
  
  name_vector_df <- as.data.frame(name_vector)
  
  new_names <- name_vector_df %>%
    rename(df_name = 1) %>%
    separate(df_name, into = c("df_name", "drop"), sep = 7) %>%
    dplyr::select(-drop)
  
  new_names_list <- as.list(new_names)
  
  return(new_names_list$df_name)
}

```

# Read in files

```{r}
acs_files <- list.files(path = "N:\\CommDev\\Research\\Research\\Census Data\\ACS\\5_Excel_Data\\",
                    pattern = "metros.csv$")

setwd("N:\\CommDev\\Research\\Research\\Census Data\\ACS\\5_Excel_Data\\")

list2env(purrr::map(set_names(acs_files, make_names(acs_files)), read_csv), envir = .GlobalEnv)

```

```{r}
library(rlang)
#' Sum variables within a range and by a certain interval
#'
#' Creates an unquoted sum statement to be used with the "mutate" function
#'
#' @param table Census table ID, including "e" or zeros
#' @param start first row in range to be summed
#' @param end last row in range to be summed
#' @param int intervals at which the rows occur
#' 
#' @return unquoted sum string that can be used in tandem with "mutate" to create new variable
#' 
#' @example
#' censusSum("B18130e", 5, 40, 7)
#'
#' @export 

censusSum <- function(table, start, end, int) {
  
 rlang::parse_expr(paste(rep(table), seq(from = start, to = end, by = int), sep = "", collapse = " + "))
  
}

# Non-rlang equivalent, then has to be wrapped in "eval()" function
# parse(text =
```

# Employment status and poverty status by disability (2005-2018)

Use odds ratio to calculate disparities (see Matt Schroeder's helpful explanation below).

![Odds-ratio explanation](Odds-ratio for disparities.png)

Calculate odds of those with 1+ disabilities being employed relative to odds of those with no disabilities being employed.  Where odds of 1+ disabilities persons being employed are lower relative to odds of those with no disabilities being employed, disparity is wider. For example, if odds of 1+ disabilities person being employed (relative to a no disabilities person) in Area 1 is 0.11 and odds are 0.56 in Area 2, disparity between the two groups is wider in Area 1.


Calculate odds of those with 1+ disabilities being at/above poverty relative to odds of those with no disabilities being at/above poverty.  Where odds of 1+ disabilities persons being at/above poverty are lower relative to odds of those with no disabilities being at/above poverty, disparity is wider. For example, if odds of 1+ disabilities person being at/above poverty (relative to a no disabilities person) in Area 1 is 0.11 and odds are 0.56 in Area 2, disparity between the two groups is wider in Area 1.

```{r}
#' Employment status and poverty status by disability for 25 largest CBSAs in US from 2005-2018
#'
#' Using separate 1-year ACS summary files, calculates employment and poverty status by disability
#'
#' @param df dataframe named in the format "acsXXXX" where XXXX is the year and containing 1-year ACS summary file data for a year 2005 or later; in this case from local, custom-processed files in N:/CommDev/Research/Research/Census
#'
#' @return dataframe appended with "_disability_vars" containing employment status and poverty status by disability for 26 US metros for 2005-2018
#' 
#' @examples
#' disability_vars(acs2009)
#'
#' @export 

disability_vars <- function(df) {
  
  df_name <- deparse(substitute(df))
  
  df_year <- as.numeric(substr(df_name, 4, 7))
  
  if(df_year < 2005) {
    
    print("Not a valid year for the function.  Function current as of December 2019.")
    
  } else if (df_year >= 2009) {
    
  # Years 2009 and later use different table codes than 2007-2008 or 2005-2006
    df_pared <- df %>%
      dplyr::select(CBSA, starts_with("B18120"), starts_with("B18130")) %>%
      transmute(CBSA = CBSA,
                Employed_disability = B18120e4/(B18120e4 + B18120e13 + B18120e22), # Denom = total population with disability
                Employed_no_disability = B18120e11/(B18120e11 + B18120e20 + B18120e29), # Denom = total population with no disability
                Above_poverty_disability = !! censusSum("B18130e", 5, 40, 7),
                Above_poverty_no_disability = !! censusSum("B18130e", 8, 43, 7),
                Prop_above_poverty_disability = Above_poverty_disability/(Above_poverty_disability + !! censusSum("B18130e", 4, 39, 7)),
                Prop_above_poverty_no_disability = Above_poverty_no_disability/(Above_poverty_no_disability + !! censusSum("B18130e", 7, 42, 7))) %>%
      dplyr::select(-Above_poverty_disability, -Above_poverty_no_disability)
    
    invisible(df_pared)
    
  } else if (df_year <= 2007 & df_year >= 2005) {
    
    # Years 2005 and 2006
    df_pared <- df %>%
      dplyr::select(CBSA, starts_with("B18020e"), starts_with("B18030")) %>%
      transmute(CBSA = CBSA,
                Employed_disability = (B18020e5 + B18020e8 + B18020e12 + B18020e15)/B18020e2, # Num = males and females of two different age groups that have 1+ disabilities and are employed
                Employed_no_disability = (B18020e20 + B18020e23 + B18020e27 + B18020e30)/B18020e17,
                Prop_above_poverty_disability = (!! censusSum("B18030e", 6, 15, 3) + B18030e19 + B18030e22 + B18030e25 + B18030e28)/B18030e2,
                Prop_above_poverty_no_disability = (!! censusSum("B18030e", 33, 42, 3) + !! censusSum("B18030e", 46, 55, 3))/B18030e29)
    
    invisible(df_pared)
    
  }
  
  else if (df_year == 2008) {
    
     
    df_pared <- df %>%
      dplyr::select(CBSA, starts_with("B18120"), starts_with("B18130")) %>%
      transmute(CBSA = CBSA,
                Employed_disability = (B18120e4 + B18120e11)/(B18120e3 + B18120e10),
                Employed_no_disability = (B18120e7 + B18120e14)/(B18120e6 + B18120e13),
                Above_poverty_disability = !! censusSum("B18130e", 5, 40, 7),
                Above_poverty_no_disability = !! censusSum("B18130e", 8, 43, 7),
                Prop_above_poverty_disability = Above_poverty_disability/(Above_poverty_disability + !! censusSum("B18130e", 4, 39, 7)),
                Prop_above_poverty_no_disability = Above_poverty_no_disability/(Above_poverty_no_disability + !! censusSum("B18130e", 7, 42, 7))) %>%
      dplyr::select(-Above_poverty_disability, -Above_poverty_no_disability)
    
    invisible(df_pared)
    
  }
  
  else {
    
    print("Missing data for input.")
  }
  
  # Same calculation process for all years
  
  # Employment status by disability
      df_employment <- df_pared %>%            
      mutate(Odds_employ_no_disability = Employed_no_disability/(1-Employed_no_disability), # Create odds variable (See "OddsRatioDemo.xlsx for more info")
             Odds_employ_disability = Employed_disability/(1-Employed_disability), # Create odds variable
             Employ_disparity = Odds_employ_disability/Odds_employ_no_disability) %>% # Ratio of odds of being employed (Disability:No disability)
      dplyr::select(-Odds_employ_no_disability, -Odds_employ_disability, -Prop_above_poverty_no_disability, -Prop_above_poverty_disability) %>%
      arrange(desc(Employed_disability)) %>%
      mutate(Rank_employed_disability = dplyr::row_number()) %>%
      arrange(desc(Employed_no_disability)) %>%
      mutate(Rank_employed_no_disability = dplyr::row_number()) %>%
      arrange(Employ_disparity) %>% # Lower odds = wider disparity
      mutate(Rank_disparity = dplyr::row_number()) %>%
      dplyr::select(-Employ_disparity) %>%
      unite(Employed_disability, Rank_employed_disability, Employed_disability) %>%
      unite(Employed_no_disability, Rank_employed_no_disability, Employed_no_disability) %>%
      gather(Employed_disability, Employed_no_disability, key = "Topic_area_equity_group", value = "Rank_measure") %>%
      separate(Topic_area_equity_group, into = c("TOPIC_AREA", "EQUITY_GROUP"), sep = 8)
  

  # Poverty status by disability 
      df_poverty <- df_pared %>%
        mutate(Odds_no_poverty_no_disability = Prop_above_poverty_no_disability/(1-Prop_above_poverty_no_disability), # Create odds variable (See "OddsRatioDemo.xlsx for more info")
               Odds_no_poverty_disability = Prop_above_poverty_disability/(1-Prop_above_poverty_disability), # Create odds variable
               Poverty_disparity = Odds_no_poverty_disability/Odds_no_poverty_no_disability) %>% # Ratio of odds of being above poverty (disability:no disability)
        dplyr::select(-Odds_no_poverty_no_disability, -Odds_no_poverty_disability, -Employed_disability, -Employed_no_disability) %>%
        arrange(desc(Prop_above_poverty_disability)) %>% # Higher rates of no poverty amongst those with disability = better
        mutate(Rank_no_poverty_disability = dplyr::row_number()) %>%
        arrange(desc(Prop_above_poverty_no_disability)) %>% # Higher rates of no poverty amongst those with no disabilities = better
        mutate(Rank_no_poverty_no_disability = dplyr::row_number()) %>%
        arrange(Poverty_disparity) %>% # Lower odds of no poverty for disability relative to no disability = wider disparity
        mutate(Rank_disparity = dplyr::row_number()) %>%
        dplyr::select(-Poverty_disparity) %>%
        unite(Poverty_status_disability, Rank_no_poverty_disability, Prop_above_poverty_disability) %>%
        unite(Poverty_status_no_disability, Rank_no_poverty_no_disability, Prop_above_poverty_no_disability) %>%
        gather(Poverty_status_disability, Poverty_status_no_disability, key = "Topic_area_equity_group", value = "Rank_measure") %>%
        separate(Topic_area_equity_group, into = c("TOPIC_AREA", "EQUITY_GROUP"), sep = 14)
  
  
  disability <- rbind(df_employment, df_poverty)
  
  disability_tidy <- disability %>%
    separate(Rank_measure, into = c("Rank of measure", "Measure"), sep = "_") %>%
    gather(`Rank of measure`, Measure, Rank_disparity, key = "MEASURE", value = "VALUE") %>%
    mutate(EQUITY_GROUP = recode(EQUITY_GROUP, `_disability` = "One or more disabilities", `_no_disability` = "No disability"),
           MEASURE = recode(MEASURE, `Rank_disparity` = "Rank of disparity"),
           EQUITY_CHARACTERISTIC = "Disability",
           TOPIC_AREA = ifelse(TOPIC_AREA == "Poverty_status", "At/above poverty:equity group population ratio", "Employment:equity group population ratio")) %>%
    mutate(YEAR = str_replace(df_name, pattern = "acs", replacement = "")) %>%
    mutate(Rank_reference = ifelse(EQUITY_GROUP == "No disability" & MEASURE == "Rank of disparity", 1, 0)) %>%
    filter(Rank_reference != 1) %>% # Remove lines that refer to reference group disparity
    dplyr::select(-Rank_reference)
    
    assign(paste(df_name, "disability_vars", sep = "_"), disability_tidy, envir = .GlobalEnv)
}

# employment_by_disability(acs2009)
# 
# df_list <- list(acs2009,
#                 acs2010,
#                 acs2011,
#                 acs2012,
#                 acs2013,
#                 acs2014,
#                 acs2015,
#                 acs2016,
#                 acs2017,
#                 acs2018)
# 
# e_by_d <- purrr::map(df_list, employment_by_disability)
# 
# names(e_by_d) <- 2009:2018
# 
# list2env(e_by_d ,.GlobalEnv)

disability_vars(acs2005)
disability_vars(acs2006)
disability_vars(acs2007)
disability_vars(acs2008)
disability_vars(acs2009)
disability_vars(acs2010)
disability_vars(acs2011)
disability_vars(acs2012)
disability_vars(acs2013)
disability_vars(acs2014)
disability_vars(acs2015)
disability_vars(acs2016)
disability_vars(acs2017)
disability_vars(acs2018)

disability_df <- rbind(acs2005_disability_vars,
                       acs2006_disability_vars,
                       acs2008_disability_vars,
                       acs2009_disability_vars,
                       acs2010_disability_vars,
                       acs2011_disability_vars,
                       acs2012_disability_vars,
                       acs2013_disability_vars,
                       acs2014_disability_vars,
                       acs2015_disability_vars,
                       acs2016_disability_vars,
                       acs2017_disability_vars,
                       acs2018_disability_vars)

#write_csv(disability_df, "")
```

```{r}
# try_summing <- function(df){
# 
# 
#   df_new3 <<- df %>%
#     dplyr::select(starts_with("B18130")) %>%
#     transmute(sum_b18020 = eval(parse(text = paste(rep("B18130e", 5), seq(from = 5, to = 40, by = 7), sep = "", collapse = " + "))))
# 
# }
# 
# try_summing(acs2009)
# 
# 
# try_sum2 <- function(df) {
#   df_new2 <<- df %>%
#     dplyr::select(starts_with("B18130")) %>%
#     transmute(sum_b18020 = censusSum("B18130"), 5, 40, 7)
# }
# 
# parse(text = paste(rep("B18130e", 5), seq(from = 5, to = 40, by = 7), sep = "", collapse = " + "))
```

# Employment by age (B23001) (2005-2018)

```{r}

employment_by_age <- function(df) {
  
  df_name <- deparse(substitute(df))
  
  df_year <- as.numeric(substr(df_name, 4, 7))
  
  df_tidy <- df %>%
    dplyr::select(CBSA, starts_with("B23001")) %>%
    transmute(CBSA = CBSA,
              Employed_16_19 = (B23001e5 + B23001e7 + B23001e91 + B23001e93)/(B23001e3 + B23001e89),
              Employed_20_34 = (B23001e12 + B23001e14 + B23001e19 + B23001e21 + B23001e26 + B23001e28 + B23001e33 + B23001e35 + B23001e98 + B23001e100 + B23001e105 + B23001e107 + B23001e112 + B23001e114 + B23001e119 + B23001e121)/(!! censusSum("B23001e", 10, 31, 7) + !! censusSum("B23001e", 96, 117, 7)),
              Employed_35_64 = (B23001e40 + B23001e42 + B23001e47 + B23001e49 + B23001e54 + B23001e56 + B23001e61 + B23001e63 + B23001e68 + B23001e70 + B23001e126 + B23001e128 + B23001e133 + B23001e135 + B23001e140 + B23001e142 + B23001e147 + B23001e149 + B23001e154 + B23001e156)/(B23001e38 + B23001e45 + B23001e52 + B23001e59 + B23001e66 + B23001e124 + B23001e131 + B23001e138 + B23001e145 + B23001e152),
              Employed_65_over = (B23001e75 + B23001e80 + B23001e85 + B23001e161 + B23001e166 + B23001e171)/(B23001e73 + B23001e78 + B23001e83 + B23001e159 + B23001e164 + B23001e169)) %>%
    arrange(desc(Employed_16_19)) %>%
    mutate(Rank_employed_16_19 = row_number()) %>%
    arrange(desc(Employed_20_34)) %>%
    mutate(Rank_employed_20_34 = row_number()) %>%
    arrange(desc(Employed_35_64)) %>%
    mutate(Rank_employed_35_64 = row_number()) %>%
    arrange(desc(Employed_65_over)) %>%
    mutate(Rank_employed_65_over = row_number()) %>%
    unite(`16-19`, Employed_16_19, Rank_employed_16_19) %>%
    unite(`20-34`, Employed_20_34, Rank_employed_20_34) %>%
    unite(`35-64`, Employed_35_64, Rank_employed_35_64) %>%
    unite(`65+`, Employed_65_over, Rank_employed_65_over) %>%
    gather(`16-19`:`65+`, key = "EQUITY_GROUP", value = "Measure_rank") %>%
    mutate(EQUITY_CHARACTERISTIC = "Age",
           TOPIC_AREA = "Employment:equity group population ratio") %>%
    separate(Measure_rank, into = c("Measure", "Rank of measure"), sep = "_") %>%
    gather(Measure, `Rank of measure`, key = "MEASURE", value = "VALUE") %>%
    mutate(YEAR = str_replace(df_name, pattern = "acs", replacement = ""))
  
  assign(paste(df_name, "e_by_age", sep = "_"), df_tidy, envir = .GlobalEnv)
  
}

employment_by_age(acs2005)
employment_by_age(acs2006)
employment_by_age(acs2007)
employment_by_age(acs2008)
employment_by_age(acs2009)
employment_by_age(acs2010)
employment_by_age(acs2011)
employment_by_age(acs2012)
employment_by_age(acs2013)
employment_by_age(acs2014)
employment_by_age(acs2015)
employment_by_age(acs2016)
employment_by_age(acs2017)
employment_by_age(acs2018)

e_by_age_df <- rbind(acs2005_e_by_age,
                     acs2006_e_by_age,
                     acs2007_e_by_age,
                     acs2008_e_by_age,
                     acs2009_e_by_age,
                     acs2010_e_by_age,
                     acs2011_e_by_age,
                     acs2012_e_by_age,
                     acs2013_e_by_age,
                     acs2014_e_by_age,
                     acs2015_e_by_age,
                     acs2016_e_by_age,
                     acs2017_e_by_age,
                     acs2018_e_by_age)

```

# Poverty by age (B17020) (2005-2018)

```{r}

poverty_by_age <- function(df) {
  
  df_name <- deparse(substitute(df))
  
  df_year <- as.numeric(substr(df_name, 4, 7))
  
  df_tidy <- df %>%
    dplyr::select(CBSA, starts_with("B23001")) %>%
    transmute(CBSA = CBSA,
              Employed_16_19 = (B23001e5 + B23001e7 + B23001e91 + B23001e93)/(B23001e3 + B23001e89),
              Employed_20_34 = (B23001e12 + B23001e14 + B23001e19 + B23001e21 + B23001e26 + B23001e28 + B23001e33 + B23001e35 + B23001e98 + B23001e100 + B23001e105 + B23001e107 + B23001e112 + B23001e114 + B23001e119 + B23001e121)/(B23001e10 + B23001e17 + B23001e24 + B23001e31 + B23001e96 + B23001e103 + B23001e110 + B23001e117),
              Employed_35_64 = (B23001e40 + B23001e42 + B23001e47 + B23001e49 + B23001e54 + B23001e56 + B23001e61 + B23001e63 + B23001e68 + B23001e70 + B23001e126 + B23001e128 + B23001e133 + B23001e135 + B23001e140 + B23001e142 + B23001e147 + B23001e149 + B23001e154 + B23001e156)/(B23001e38 + B23001e45 + B23001e52 + B23001e59 + B23001e66 + B23001e124 + B23001e131 + B23001e138 + B23001e145 + B23001e152),
              Employed_65_over = (B23001e75 + B23001e80 + B23001e85 + B23001e161 + B23001e166 + B23001e171)/(B23001e73 + B23001e78 + B23001e83 + B23001e159 + B23001e164 + B23001e169)) %>%
    arrange(desc(Employed_16_19)) %>%
    mutate(Rank_employed_16_19 = row_number()) %>%
    arrange(desc(Employed_20_34)) %>%
    mutate(Rank_employed_20_34 = row_number()) %>%
    arrange(desc(Employed_35_64)) %>%
    mutate(Rank_employed_35_64 = row_number()) %>%
    arrange(desc(Employed_65_over)) %>%
    mutate(Rank_employed_65_over = row_number()) %>%
    unite(`16-19`, Employed_16_19, Rank_employed_16_19) %>%
    unite(`20-34`, Employed_20_34, Rank_employed_20_34) %>%
    unite(`35-64`, Employed_35_64, Rank_employed_35_64) %>%
    unite(`65+`, Employed_65_over, Rank_employed_65_over) %>%
    gather(`16-19`:`65+`, key = "EQUITY_GROUP", value = "Measure_rank") %>%
    mutate(EQUITY_CHARACTERISTIC = "Age",
           TOPIC_AREA = "Employment:equity group population ratio") %>%
    separate(Measure_rank, into = c("Measure", "Rank of measure"), sep = "_") %>%
    gather(Measure, `Rank of measure`, key = "MEASURE", value = "VALUE") %>%
    mutate(YEAR = str_replace(df_name, pattern = "acs", replacement = ""))
  
  assign(paste(df_name, "p_by_age", sep = "_"), df_tidy, envir = .GlobalEnv)
  
}

# employment_by_age(acs2005)
# employment_by_age(acs2006)
employment_by_age(acs2007)
employment_by_age(acs2008)
employment_by_age(acs2009)
employment_by_age(acs2010)
employment_by_age(acs2011)
employment_by_age(acs2012)
employment_by_age(acs2013)
employment_by_age(acs2014)
employment_by_age(acs2015)
employment_by_age(acs2016)
employment_by_age(acs2017)
employment_by_age(acs2018)

e_by_age_df <- rbind(acs2005_e_by_age,
                     acs2006_e_by_age,
                     acs2007_e_by_age,
                     acs2008_e_by_age,
                     acs2009_e_by_age,
                     acs2010_e_by_age,
                     acs2011_e_by_age,
                     acs2012_e_by_age,
                     acs2013_e_by_age,
                     acs2014_e_by_age,
                     acs2015_e_by_age,
                     acs2016_e_by_age,
                     acs2017_e_by_age,
                     acs2018_e_by_age)


acs2007 %>%
  select(starts_with("B17001"))

names_05 <- enframe(names(acs2005))
```

# Homeownership by age

```{r}

tenure_by_age <- function(df) {
  
  df_name <- deparse(substitute(df))
  
  df_year <- as.numeric(substr(df_name, 4, 7))
  
  df_tidy <- df %>%
    dplyr::select(CBSA, starts_with("B25007")) %>%
    transmute(CBSA = CBSA,
              Owner_occ_15_24 = B25007e3/(B25007e3 + B25007e13),
              Owner_occ_25_34 = B25007e4/(B25007e4 + B25007e14),
              Owner_occ_35_64 = (!! censusSum("B25007", 5, 8, 1))/(!! censusSum("B25007", 5, 8, 1) + !! censusSum("B25007", 15, 18, 1)),
              Owner_occ_65_over = (B25007e9 + B25007e10 + B25007e11)/(B25007e9 + B25007e10 + B25007e11 + B25007e19 + B25007e20 + B25007e21)) %>%
    arrange(desc(Owner_occ_15_24)) %>%
    mutate(Rank_owner_occ_15_24 = row_number()) %>%
    arrange(desc(Owner_occ_25_34)) %>%
    mutate(Rank_owner_occ_25_34 = row_number()) %>%
    arrange(desc(Owner_occ_35_64)) %>%
    mutate(Rank_owner_occ_35_64 = row_number()) %>%
    arrange(desc(Owner_occ_65_over)) %>%
    mutate(Rank_owner_occ_65_over = row_number()) %>%
    unite(`15-24`, Owner_occ_15_24, Rank_owner_occ_15_24) %>%
    unite(`25-34`, Owner_occ_25_34, Rank_owner_occ_25_34) %>%
    unite(`35-64`, Owner_occ_35_64, Rank_owner_occ_35_64) %>%
    unite(`65+`, Owner_occ_65_over, Rank_owner_occ_65_over) %>%
    gather(`15-24`:`65+`, key = "EQUITY_GROUP", value = "Measure_rank") %>%
    mutate(EQUITY_CHARACTERISTIC = "Age",
           TOPIC_AREA = "Owner-occupied units:equity group population ratio") %>%
    separate(Measure_rank, into = c("Measure", "Rank of measure"), sep = "_") %>%
    gather(Measure, `Rank of measure`, key = "MEASURE", value = "VALUE") %>%
    mutate(YEAR = str_replace(df_name, pattern = "acs", replacement = ""))
  
  assign(paste(df_name, "tenure_by_age", sep = "_"), df_tidy, envir = .GlobalEnv)
  
}

tenure_by_age(acs2005)
tenure_by_age(acs2006)
tenure_by_age(acs2007)
tenure_by_age(acs2008)
tenure_by_age(acs2009)
tenure_by_age(acs2010)
tenure_by_age(acs2011)
tenure_by_age(acs2012)
tenure_by_age(acs2013)
tenure_by_age(acs2014)
tenure_by_age(acs2015)
tenure_by_age(acs2016)
tenure_by_age(acs2017)
tenure_by_age(acs2018)

tenure_by_age_df <- rbind(acs2005_tenure_by_age,
                          acs2006_tenure_by_age,
                          acs2007_tenure_by_age,
                          acs2008_tenure_by_age,
                          acs2009_tenure_by_age,
                          acs2010_tenure_by_age,
                          acs2011_tenure_by_age,
                          acs2012_tenure_by_age,
                          acs2013_tenure_by_age,
                          acs2014_tenure_by_age,
                          acs2015_tenure_by_age,
                          acs2016_tenure_by_age,
                          acs2017_tenure_by_age,
                          acs2018_tenure_by_age)

```

